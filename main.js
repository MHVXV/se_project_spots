!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.inputErrorClass)},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},r=document.querySelector(".profile__edit-btn"),a=document.querySelector(".profile__add-btn"),s=document.querySelector(".profile__name"),l=document.querySelector(".profile__description"),c=document.querySelector("#profile-edit-modal"),i=document.forms["profile-form"],d=(c.querySelector(".modal__close-btn"),c.querySelector("#profile-name-input")),u=c.querySelector("#profile-description-input"),m=document.querySelector("#add-card-modal"),p=document.forms["card-form"],_=(m.querySelector(".modal__close-btn"),m.querySelector(".modal__submit-btn")),f=m.querySelector("#add-card-name-input"),y=m.querySelector("#add-card-link-input"),v=document.querySelector("#preview-modal"),S=v.querySelector(".modal__image"),g=v.querySelector(".modal__caption"),b=(v.querySelector(".modal__close-btn_type_preview"),document.querySelector("#card-template")),q=document.querySelector(".cards__list");function h(e){console.log(e);const t=b.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",(()=>{r.classList.toggle("card__like-btn_liked")})),a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{L(v),S.src=e.link,S.alt=e.name,g.textContent=e.name})),t}function w(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",k),e.removeEventListener("mousedown",E)}function k(e){"Escape"===e.key&&w(document.querySelector(".modal_opened"))}function E(e){e.target.classList.contains("modal_opened")&&w(e.target)}function L(e){e.classList.add("modal_opened"),document.addEventListener("keydown",k),e.addEventListener("mousedown",E)}r.addEventListener("click",(()=>{d.value=s.textContent,u.value=l.textContent,((e,o,n)=>{o?.forEach((o=>{t(e,o,n)}))})(i,[d,u],e),L(c)})),document.querySelectorAll(".modal__close-btn").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>w(t)))})),a.addEventListener("click",(()=>{L(m)})),i.addEventListener("submit",(function(e){e.preventDefault(),s.textContent=d.value,l.textContent=u.value,w(c)})),p.addEventListener("submit",(function(t){t.preventDefault(),console.log(f.value),console.log(y.value);const o=h({name:f.value,link:y.value});q.prepend(o),n(_,e),w(m),p.reset()})),[{name:"Golden Gate bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=h(e);q.append(t)})),(e=>{document.querySelectorAll(e.formSelector).forEach((n=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach((s=>{s.addEventListener("input",(function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(n.inputErrorClass)})(e,o,o.validationMessage,n)})(e,s,n),o(r,a,n)}))}))})(n,e)}))})(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBidXR0b25FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbCwgc2V0dGluZ3MpO1xyXG5cclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsLCBzZXR0aW5ncyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWwsIHNldHRpbmdzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBlcnJvck1zZywgc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xyXG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBzZXR0aW5ncykgPT4ge1xyXG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWwsIHNldHRpbmdzKSA9PiB7XHJcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UsIHNldHRpbmdzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBzZXR0aW5ncyk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xyXG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBzZXR0aW5ncykgPT4ge1xyXG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgc2V0dGluZ3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgc2V0dGluZ3MpID0+IHtcclxuICBidXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBpbnB1dExpc3QsIHNldHRpbmdzKSA9PiB7XHJcbiAgaW5wdXRMaXN0Py5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgc2V0dGluZ3MpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWwpID0+IHtcclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgc2V0dGluZ3MpO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG4gIGVuYWJsZVZhbGlkYXRpb24sXHJcbiAgc2V0dGluZ3MsXHJcbiAgcmVzZXRWYWxpZGF0aW9uLFxyXG4gIGRpc2FibGVCdXR0b24sXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgYnJpZGdlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZUFkZEltZ0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcclxuY29uc3QgZWRpdE1vZGFsQ2xvc2VCdXR0b24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xyXG5jb25zdCBlZGl0TW9kYWxOYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XHJcbmNvbnN0IGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuXHJcbmNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJjYXJkLWZvcm1cIl07XHJcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcclxuY29uc3QgY2FyZE1vZGFsU3VibWl0QnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XHJcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xyXG5jb25zdCBjYXJkTGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcclxuXHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgcHJldmlld01vZGFsSW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbkVsID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XHJcblxyXG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ1dHRvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19jbG9zZS1idG5fdHlwZV9wcmV2aWV3XCJcclxuKTtcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcclxuICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIGNvbnN0IGNhcmROYW1lRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gIGNvbnN0IGNhcmRJbWFnZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gIGNvbnN0IGNhcmRMaWtlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcclxuICBjb25zdCBjYXJkRGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG5cclxuICBjYXJkTmFtZUVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIGNhcmRJbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xyXG4gIGNhcmRJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG5cclxuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY2FyZExpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xyXG4gIH0pO1xyXG5cclxuICBjYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9KTtcclxuXHJcbiAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XHJcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcclxuICAgIHByZXZpZXdNb2RhbEltYWdlRWwuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWU7XHJcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnNvbGUubG9nKGNhcmROYW1lSW5wdXQudmFsdWUpO1xyXG4gIGNvbnNvbGUubG9nKGNhcmRMaW5rSW5wdXQudmFsdWUpO1xyXG4gIGNvbnN0IGlucHV0VmFsdWVzID0geyBuYW1lOiBjYXJkTmFtZUlucHV0LnZhbHVlLCBsaW5rOiBjYXJkTGlua0lucHV0LnZhbHVlIH07XHJcbiAgY29uc3QgY2FyZEVsID0gZ2V0Q2FyZEVsZW1lbnQoaW5wdXRWYWx1ZXMpO1xyXG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbCk7XHJcbiAgZGlzYWJsZUJ1dHRvbihjYXJkTW9kYWxTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcclxuICBjbG9zZU1vZGFsKGNhcmRNb2RhbCk7XHJcbiAgY2FyZEZvcm0ucmVzZXQoKTtcclxufVxyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcclxuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG4gIHJlc2V0VmFsaWRhdGlvbihcclxuICAgIHByb2ZpbGVGb3JtLFxyXG4gICAgW2VkaXRNb2RhbE5hbWVJbnB1dCwgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dF0sXHJcbiAgICBzZXR0aW5nc1xyXG4gICk7XHJcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XHJcbn0pO1xyXG5cclxuY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xyXG5cclxuY2xvc2VCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKHBvcHVwKSk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUFkZEltZ0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG9wZW5Nb2RhbChjYXJkTW9kYWwpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRWRpdEZvcm1TdWJtaXQpO1xyXG5jYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xyXG5cclxuaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICBjb25zdCBjYXJkRWwgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcclxuICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEVzYyk7XHJcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZU92ZXJsYXkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsRXNjKGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBtb2RhbE9wZW5lZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgY2xvc2VNb2RhbChtb2RhbE9wZW5lZCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU92ZXJsYXkoZXZ0KSB7XHJcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICBjbG9zZU1vZGFsKGV2dC50YXJnZXQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU1vZGFsRXNjKTtcclxuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlT3ZlcmxheSk7XHJcbn1cclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xyXG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicHJvZmlsZUFkZEltZ0J1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZWRpdE1vZGFsIiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTW9kYWwiLCJjYXJkRm9ybSIsImNhcmRNb2RhbFN1Ym1pdEJ1dHRvbiIsImNhcmROYW1lSW5wdXQiLCJjYXJkTGlua0lucHV0IiwicHJldmlld01vZGFsIiwicHJldmlld01vZGFsSW1hZ2VFbCIsInByZXZpZXdNb2RhbENhcHRpb25FbCIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTmFtZUVsIiwiY2FyZEltYWdlRWxlbWVudCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZUJ0biIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZSIsIm9wZW5Nb2RhbCIsImNsb3NlTW9kYWwiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZU1vZGFsRXNjIiwiY2xvc2VPdmVybGF5IiwiZXZ0Iiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJ2YWx1ZSIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uIiwicG9wdXAiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJjYXJkRWwiLCJwcmVwZW5kIiwicmVzZXQiLCJpdGVtIiwiYXBwZW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTXNnIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==